<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intro</title>
  <style>
    html, body { height:100%; margin:0; }
    body{
      background:#000;
      overflow:hidden;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .intro-wrap{
      position:fixed;
      inset:0;
      background:#000;
    }
    video{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    /* Tıklama efekti */
    .ripple{
      position:fixed;
      width:14px;
      height:14px;
      border-radius:999px;
      transform: translate(-50%, -50%);
      pointer-events:none;
      background: rgba(255,255,255,.45);
      animation: ripple .55s ease-out forwards;
      z-index:5;
    }
    @keyframes ripple{
      0%   { opacity:1; transform: translate(-50%,-50%) scale(1); }
      100% { opacity:0; transform: translate(-50%,-50%) scale(22); }
    }

    /* Geçiş karartması */
    .fadeout{
      position:fixed;
      inset:0;
      background:#000;
      opacity:0;
      pointer-events:none;
      z-index:10;
      transition: opacity .35s ease;
    }
    .fadeout.on{ opacity:1; }
  </style>
</head>
<body>

  <div class="intro-wrap" id="intro">
    <!-- loop YOK: video bitince tekrar etmez -->
    <video id="introVideo" autoplay muted playsinline preload="auto">
      <source src="5s auto 720p Video 02.mp4" type="video/mp4">
    </video>
  </div>

  <div class="fadeout" id="fade"></div>

  <script>
    const NEXT_PAGE = "main.html";

    const fade = document.getElementById("fade");
    const vid  = document.getElementById("introVideo");

    function rippleAt(x,y){
      const r = document.createElement("div");
      r.className = "ripple";
      r.style.left = x + "px";
      r.style.top  = y + "px";
      document.body.appendChild(r);
      r.addEventListener("animationend", () => r.remove());
    }

    let locked = false;

    function goNext(){
      if(locked) return;
      locked = true;

      fade.classList.add("on");
      setTimeout(() => window.location.href = NEXT_PAGE, 220);
    }

    function handleTap(e){
      if(locked) return;

      const x = (e.touches && e.touches[0]) ? e.touches[0].clientX : e.clientX;
      const y = (e.touches && e.touches[0]) ? e.touches[0].clientY : e.clientY;

      rippleAt(x,y);

      // iOS autoplay engeli için tıklayınca play dene
      try{ vid.play(); }catch(_){}

      // SADECE tıklayınca geç
      setTimeout(goNext, 200);
    }

    document.addEventListener("click", handleTap, {passive:true});
    document.addEventListener("click", handleTap, {passive:true});


    // ✅ Video bitince otomatik geçiş YOK.
    // Sadece durur ve son karede kalır; kullanıcı tıklayana kadar ekranda bekler.
    vid.addEventListener("ended", () => {
      try{
        vid.pause();
        // Bazı tarayıcılarda son kareyi garanti etmek için:
        vid.currentTime = vid.duration;
      }catch(_){}
    });
  </script>

</body>
</html>
